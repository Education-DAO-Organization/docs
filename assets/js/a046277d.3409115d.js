"use strict";(self.webpackChunkeducation_docs=self.webpackChunkeducation_docs||[]).push([[9282],{4547:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>i,metadata:()=>a,toc:()=>c});var t=o(4848),r=o(8453);const i={},s=void 0,a={id:"courses/blockchain-developer-bootcamp/S04-developer-tooling/M3-infura/L1/index",title:"index",description:"Infura logo",source:"@site/docs/courses/blockchain-developer-bootcamp/S04-developer-tooling/M3-infura/L1/index.md",sourceDirName:"courses/blockchain-developer-bootcamp/S04-developer-tooling/M3-infura/L1",slug:"/courses/blockchain-developer-bootcamp/S04-developer-tooling/M3-infura/L1/",permalink:"/educationdao.xyz/docs/courses/blockchain-developer-bootcamp/S04-developer-tooling/M3-infura/L1/",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedBy:"oliver renwick",lastUpdatedAt:1721055769e3,frontMatter:{},sidebar:"docSidebar",previous:{title:"index",permalink:"/educationdao.xyz/docs/courses/blockchain-developer-bootcamp/S04-developer-tooling/M2-web3-libraries/L2-web3-connect-to-contract/"},next:{title:"index",permalink:"/educationdao.xyz/docs/courses/blockchain-developer-bootcamp/S04-developer-tooling/M3-infura/L2/"}},l={},c=[{value:"Register",id:"register",level:2},{value:"Setting Up Your First Project",id:"setting-up-your-first-project",level:2},{value:"Incorporating Infura Into Your Development Environment",id:"incorporating-infura-into-your-development-environment",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",img:"img",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Infura logo",src:o(1990).A+"",width:"5472",height:"3235"})}),"\n",(0,t.jsx)(n.p,{children:'In our section on "Development Workflow" and "Users in the Mental Model," we described our interactions with the Ethereum network going through a network gateway. In the "Ethereum Basics" of the course, we talked about Ethereum clients, nodes, and how to interact with the network you need to run a full node.'}),"\n",(0,t.jsxs)(n.p,{children:["However, for developers just starting on Ethereum or users who don't have easy access (or knowledge) of an Ethereum node, you can use an Ethereum gateway service called ",(0,t.jsx)(n.a,{href:"https://infura.io",children:"Infura."})]}),"\n",(0,t.jsx)(n.p,{children:"Infura provides a simple API access point for not only the Ethereum mainnet and all public testnets, but also for IPFS, the Ethereum 2.0 Beacon Chain, Filecoin, Optimism, Arbitrum and Polygon. Incorporating Infura into your workflow will make deploying much easier. As your project grows, you can absolutely consider other options, but it's a nice, easy onramp to development."}),"\n",(0,t.jsxs)(n.p,{children:["Follow the steps below to sign up for Infura (there are also great step-by-step instructions on Infura's website ",(0,t.jsx)(n.a,{href:"https://blog.infura.io/getting-started-with-infura-28e41844cc89/",children:"here"}),"):"]}),"\n",(0,t.jsx)(n.h2,{id:"register",children:"Register"}),"\n",(0,t.jsxs)(n.p,{children:["First thing, register for a free account on ",(0,t.jsx)(n.a,{href:"https://infura.io",children:"Infura."})," For smaller development projects (or even medium-sized ones), Infura's free tier is more than capable of handling your requests. Coogan is currently running an Eth2 validator client on Infura's free tier (you'll see it in the screenshots below!)"]}),"\n",(0,t.jsx)(n.h2,{id:"setting-up-your-first-project",children:"Setting Up Your First Project"}),"\n",(0,t.jsx)(n.p,{children:"Once you've registered, you'll click the Ethereum logo on the left-hand side. (see below)"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Selecting Ethereum endpoint on Infura",src:o(4538).A+"",width:"1600",height:"1215"})}),"\n",(0,t.jsx)(n.p,{children:"You can also see the other available network endpoints listed here, which will be more since we took the above screenshot!"}),"\n",(0,t.jsx)(n.p,{children:"Next, click \u201cCreate New Project\u201d in upper right hand corner:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Selecting Create New Project on Infura",src:o(785).A+"",width:"1600",height:"1215"})}),"\n",(0,t.jsxs)(n.p,{children:["Name your project and go to \u201cSettings.\u201d There, you'll be able to access the credentials you'll use in your local environment (either Truffle or some other framework) to help make deployment easy. Again, these are your personal, sensitive credentials so be sure to store them in a .env file that you add to your .gitignore doc! ",(0,t.jsx)(n.a,{href:"https://consensys.net/blog/developers/how-to-avoid-uploading-your-private-key-to-github-approaches-to-prevent-making-your-secrets-public/",children:"Read more about that here."})]}),"\n",(0,t.jsxs)(n.p,{children:["A ",(0,t.jsx)(n.code,{children:".env"})," file for our Infura credentials will look something like:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'MNEMONIC="Your MNEMONICs" // A wallet with enough ETH\nINFURA_URL="Your Infura URL with API key"\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://ethereum.stackexchange.com/questions/96929/infura-io-secret-configuration-in-hdwalletprovider-truffle-config-js",children:"source"})}),"\n",(0,t.jsx)(n.h2,{id:"incorporating-infura-into-your-development-environment",children:"Incorporating Infura Into Your Development Environment"}),"\n",(0,t.jsxs)(n.p,{children:["Now let's see how we take our Infura credentials and plug them into a development framework like Truffle. For this, we're going to dive deeper into our ",(0,t.jsx)(n.code,{children:"truffle-config.js"})," file"]}),"\n",(0,t.jsxs)(n.p,{children:["As you might have gathered by now, the Truffle configuration file (",(0,t.jsx)(n.code,{children:"truffle-config.js"}),") is the backbone of a Truffle-based project. Thus far we\u2019ve only seen it used to store details of the different networks we\u2019re targeting (e.g. local, testnet, mainet, etc), but it\u2019s actually used for a lot more, such as network configuration."]}),"\n",(0,t.jsxs)(n.p,{children:["To illustrate this, let's look at the ",(0,t.jsx)(n.code,{children:"networks"})," section of our ",(0,t.jsx)(n.code,{children:"truffle-config.js"})," from our SimpleStorage example we've been working on in previous lessons. Here's a sample ",(0,t.jsx)(n.code,{children:"truffle-config.js"})," file that targets the Ganache endpoint we setup earlier:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'module.exports = {\n  networks: {\n    development: {\n      host: "127.0.0.1",\n      port: 8545,\n      network_id: "*" // Match any network id\n    }\n  },\n  compilers: {\n    solc: {\n      version: "^0.8.0"\n    }\n  }\n};\n'})}),"\n",(0,t.jsxs)(n.p,{children:["When we run ",(0,t.jsx)(n.code,{children:"truffle init"})," earlier, though, the ",(0,t.jsx)(n.code,{children:"truffle-config.js"})," contains a ton of helpful material that's been commented out. For example, here's a section under ",(0,t.jsx)(n.code,{children:"networks"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"    // Useful for deploying to a public network.\n    // NB: It's important to wrap the provider as a function.\n    // ropsten: {\n    // provider: () => new HDWalletProvider(mnemonic, `https://ropsten.infura.io/v3/YOUR-PROJECT-ID`),\n    // network_id: 3,       // Ropsten's id\n    // gas: 5500000,        // Ropsten has a lower block limit than mainnet\n    // confirmations: 2,    // # of confs to wait between deployments. (default: 0)\n    // timeoutBlocks: 200,  // # of blocks before a deployment times out  (minimum/default: 50)\n    // skipDryRun: true     // Skip dry run before migrations? (default: false for public nets )\n    // },\n"})}),"\n",(0,t.jsxs)(n.p,{children:["To activate this, all we have to do is comment the code back in (",(0,t.jsx)(n.code,{children:"\u2318 /"})," in VSCode) and substitute in the credentials we got from Infura. Note that you need to change the ",(0,t.jsx)(n.code,{children:"YOUR-PROJECT-ID"})," and well as whatever subdomain network you'd like to work from. Be sure as well to change the ",(0,t.jsx)(n.code,{children:"network_id"})," to ",(0,t.jsx)(n.a,{href:"https://besu.hyperledger.org/en/stable/Concepts/NetworkID-And-ChainID/",children:"the appropriate one for your network."})]}),"\n",(0,t.jsx)(n.p,{children:"Install hdwallet-provider"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm install @truffle/hdwallet-provider\n"})}),"\n",(0,t.jsx)(n.p,{children:"and dotenv to handle our .env file"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm install dotenv\n"})}),"\n",(0,t.jsxs)(n.p,{children:["To grab our Infura credentials safely from our ",(0,t.jsx)(n.code,{children:".env"})," file, you'll include this at the top of ",(0,t.jsx)(n.code,{children:"truffle-config.js"})," (HDWallet is provided, we just need to comment it out):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"const HDWalletProvider = require('@truffle/hdwallet-provider');\nconst dotenv = require('dotenv');\ndotenv.config();\nconst mnemonic = process.env.MNEMONIC;\n"})}),"\n",(0,t.jsxs)(n.p,{children:["(For reference, in the above snippet we're also using Truffle\u2019s ",(0,t.jsx)(n.a,{href:"https://github.com/trufflesuite/truffle/tree/develop/packages/hdwallet-provider",children:"HDWalletProvider library"})," enabling us to use a custom mnemonic as part of the deployment.)"]}),"\n",(0,t.jsx)(n.p,{children:"We can change the name of our testnet to any one we'd like. Here's what it would look like for Rinkeby:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'    rinkeby: {\n      provider: () => new HDWalletProvider(mnemonic, process.env.INFURA_URL),\n      network_id: "4",\n      gas: 5500000\n    }\n'})}),"\n",(0,t.jsx)(n.p,{children:"To migrate SimpleStorage to Rinkeby, we run the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$ truffle migrate --network rinkeby\n"})}),"\n",(0,t.jsx)(n.p,{children:"That's it! If you have enough Rinkeby test Eth in the account associated with your mnemonic phrase, your contract is now deployed to a public testnet using Infura!"}),"\n",(0,t.jsxs)(n.p,{children:["Later in the course, we'll discuss how Truffle and Infura can be used in the ",(0,t.jsx)(n.code,{children:"truffle-config.js"})," file to deploy to multiple networks, including non-Ethereum networks."]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},4538:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/infura-1-7683362b6c0a0e7114c371246c93a428.png"},785:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/infura-2-52cf6ef39e899668c2263d65711ed2f8.png"},1990:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/infura-logo-1b30fb36fd28f7bb5f22f3b8677ecda1.png"},8453:(e,n,o)=>{o.d(n,{R:()=>s,x:()=>a});var t=o(6540);const r={},i=t.createContext(r);function s(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);