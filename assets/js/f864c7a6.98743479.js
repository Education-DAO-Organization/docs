"use strict";(self.webpackChunkeducation_docs=self.webpackChunkeducation_docs||[]).push([[4176],{2541:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>l});var o=t(4848),r=t(8453);const i={},a="Wire up the React app with Drizzle",s={id:"courses/blockchain-developer-bootcamp/S04-developer-tooling/M4-truffle-deep-dive/L3-drizzle-ui/index",title:"Wire up the React app with Drizzle",description:"*Note that Drizzle is currently not actively maintained by Truffle, although the team is always happy to provide best-endeavors support. In addition, ConsenSys is actively hiring for front-end focused roles and/or folks interested in assisting with maintenance. Feel free to reach out if this might of interest!",source:"@site/docs/courses/blockchain-developer-bootcamp/S04-developer-tooling/M4-truffle-deep-dive/L3-drizzle-ui/index.md",sourceDirName:"courses/blockchain-developer-bootcamp/S04-developer-tooling/M4-truffle-deep-dive/L3-drizzle-ui",slug:"/courses/blockchain-developer-bootcamp/S04-developer-tooling/M4-truffle-deep-dive/L3-drizzle-ui/",permalink:"/educationdao.xyz/docs/courses/blockchain-developer-bootcamp/S04-developer-tooling/M4-truffle-deep-dive/L3-drizzle-ui/",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedBy:"oliver renwick",lastUpdatedAt:1721137902e3,frontMatter:{},sidebar:"docSidebar",previous:{title:"index",permalink:"/educationdao.xyz/docs/courses/blockchain-developer-bootcamp/S04-developer-tooling/M4-truffle-deep-dive/L2-debug-config-forking/"},next:{title:"Other Development Tools",permalink:"/educationdao.xyz/docs/courses/blockchain-developer-bootcamp/S04-developer-tooling/M5-other-dev-tools/"}},c={},l=[{value:"Setup the store",id:"setup-the-store",level:2},{value:"LoadingContainer",id:"loadingcontainer",level:2},{value:"ContractData",id:"contractdata",level:2},{value:"ContractForm",id:"contractform",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"wire-up-the-react-app-with-drizzle",children:"Wire up the React app with Drizzle"}),"\n",(0,o.jsx)(n.p,{children:"*Note that Drizzle is currently not actively maintained by Truffle, although the team is always happy to provide best-endeavors support. In addition, ConsenSys is actively hiring for front-end focused roles and/or folks interested in assisting with maintenance. Feel free to reach out if this might of interest!"}),"\n",(0,o.jsx)(n.p,{children:"Before we go further, let's start our React app by running the follow command inside our client directory:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"    npm install @drizzle/store\n\n    npm start\n"})}),"\n",(0,o.jsxs)(n.p,{children:["This will serve the front-end under ",(0,o.jsx)(n.code,{children:"localhost:3000"})," so open that up in your browser."]}),"\n",(0,o.jsxs)(n.p,{children:["Note: Make sure to use an incognito window if you already have MetaMask installed (or disable MetaMask for now). Otherwise, the app will try to use the network specified in MetaMask rather than the develop network under ",(0,o.jsx)(n.code,{children:"localhost:9545"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"If the default Create-React-App page loaded without any issues, you may proceed."}),"\n",(0,o.jsx)(n.h2,{id:"setup-the-store",children:"Setup the store"}),"\n",(0,o.jsx)(n.p,{children:"The first thing we need to do is to setup and instantiate the Drizzle store. We are going add the following code to client/src/index.js:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:'    import drizzle functions and contract artifact\n    import { Drizzle } from "@drizzle/store";\n    import MyStringStore from "./contracts/MyStringStore.json";\n\n    let drizzle know what contracts we want and how to access our test blockchain\n    const options = {\n    contracts: [MyStringStore],\n    web3: {\n        fallback: {\n        type: "ws",\n        url: "ws://127.0.0.1:9545",\n        },\n    },\n    };\n    setup drizzle\n    const drizzle = new Drizzle(options);\n'})}),"\n",(0,o.jsx)(n.p,{children:"First, we imported the tools from Drizzle as well as the contract definition."}),"\n",(0,o.jsx)(n.p,{children:"We then built our options object for Drizzle, which in this case is just specifying the specific contract we want to be loaded by passing in the JSON build artifact."}),"\n",(0,o.jsx)(n.p,{children:"And finally, we created the drizzleStore and used that to create our drizzle instance which we will pass in as a prop to our App component."}),"\n",(0,o.jsx)(n.p,{children:"Once that is complete, your index.js should look something like this:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-JSX",children:"    import React from 'react';\n    import ReactDOM from 'react-dom';\n    import './index.css';\n    import App from './App';\n    import * as serviceWorker from './serviceWorker';\n\n    import drizzle functions and contract artifact\n    import { Drizzle, generateStore } from \"@drizzle/store\";\n    import MyStringStore from \"./contracts/MyStringStore.json\";\n"})}),"\n",(0,o.jsx)(n.p,{children:"let drizzle know what contracts we want and how to access our test blockchain"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:'const options = {\ncontracts: [MyStringStore],\nweb3: {\n    fallback: {\n    type: "ws",\n    url: "ws://127.0.0.1:9545",\n    },\n},\n};\nsetup the drizzle store and drizzle\nconst drizzle = new Drizzle(options);\nReactDOM.render(<App drizzle={drizzle} />, document.getElementById(\'root\'));\n'})}),"\n",(0,o.jsx)(n.p,{children:"Note again that the drizzle instance is passed into the App component as props."}),"\n",(0,o.jsx)(n.h1,{id:"drizzle-components",children:"Drizzle Components"}),"\n",(0,o.jsx)(n.p,{children:"Drizzle maintains a library of React components for commonly used dapp functions. For example, generating input forms for contracts.\nComponents"}),"\n",(0,o.jsx)(n.h2,{id:"loadingcontainer",children:"LoadingContainer"}),"\n",(0,o.jsx)(n.p,{children:"This components wraps your entire app (but within the DrizzleProvider) and will show a loading screen until Drizzle, and therefore web3 and your contracts, are initialized."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"    loadingComp (component) \nThe component displayed while Drizzle intializes.\n\n    errorComp (component) \nThe component displayed if Drizzle initialization fails.\n"})}),"\n",(0,o.jsx)(n.h2,{id:"contractdata",children:"ContractData"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"    contract(string, required)\nName of the contract to call.\n\n    method (string, required)\nMethod of the contract to call.\n\n    methodArgs (array) \nArguments for the contract method call. EX: The address for an ERC20 balanceOf() function. The last argument can optionally be an options object with the typical from, gas and gasPrice keys.\n\n    hideIndicator(boolean) \nIf true, hides the loading indicator during contract state updates. Useful for things like ERC20 token symbols which do not change.\n\n    toUtf8 (boolean) \nConverts the return value to a UTF-8 string before display.\n\n    toAscii (boolean) \nConverts the return value to an Ascii string before display.\n"})}),"\n",(0,o.jsx)(n.h2,{id:"contractform",children:"ContractForm"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'    contract (string, required)\nName of the contract whose method will be the basis the form.\n\n    method (string, required) \nMethod whose inputs will be used to create corresponding form fields.\n\n    sendArgs (object) \nAn object specifying options for the transaction to be sent; namely: from, gasPrice, gas and value. Further explanation of these parameters can be found here in the web3 documentation.\n\n    labels (array) \nCustom labels; will follow ABI input ordering. Useful for friendlier names. For example "_to" becoming "Recipient Address".\n'})})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>s});var o=t(6540);const r={},i=o.createContext(r);function a(e){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);